<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    @@include('./layout/head.html')
    <title>鳥語鳥嶼會員中心</title>
</head>
<body class="personal_body">
    @@include('./layout/header.html')
    <div class="personal_body1">
    <div class="personal_div_wrapper">
        @@include('./layout/backend/personalTop.html')
        <!-- 麵包屑以下 -->
        <main class="personalOrder_main" id="personal_order">
            <nav class="personalOrder_nav_change">
                <ul>
                    <li v-for="(val,i) in pagelist" :data-n="i" @click="chgpage">{{val}}</li>
                </ul>
            </nav>
            <!-- 內容清單 -->
            <component :is="personalpage"></component>
            
        </main>
    </div>
</div>
@@include('./layout/footer.html')

<script>

Vue.component('personalpage1',{
        data(){
            return{
                php:[],
            }
        },
    template:`
    <personal_eventList :infor="php"></personal_eventList>
        `,
        mounted(){  
            const url1 = './php/personal_order.php?quest=1';
        fetch(url1)
            .then(response => response.json())
            .then((text) =>{
                this.php = text
            } );
        },
    })
    
    Vue.component('personalpage2',{
        data(){
            return{
                php:[],
            }
        },
    template:`
    <personal_eventList :infor="php"></personal_eventList>
        `,
        mounted(){  
            const url1 = './php/personal_order.php?quest=2';
        fetch(url1)
            .then(response => response.json())
            .then((text) =>{
                this.php = text
            } );
        },
    })
    
    Vue.component('personal_eventList',{
        props:['infor'],
    template:`
        <div>   
            <section  v-for="val in infor"> 
                <ul>
                    <h4 id="personalOrder_date">{{val[0]}}</h4>
                    <li>
                        <h4>總金額:</h4>
                        <h4 id="personalOrder_price">{{val[1]}}元</h4>
                    </li>
                </ul>
                <div>
                    <ul :class="'porder'+val[2]">
                        <li>
                            <h5>訂單成立</h5>
                            <span v-if="val[2] == 1" id="orderCompleted_icon_greyBird" class="iconify" data-icon="emojione-v1:bird" data-width="45" data-height="45"></span>
                        </li>
                        <li>
                            <h5>撿貨</h5>
                            <span v-if="val[2] == 2" id="orderCompleted_icon_greyBird" class="iconify" data-icon="emojione-v1:bird" data-width="45" data-height="45"></span>
                        </li>
                        <li class="li_now">
                            <h5>出貨</h5>
                            <span v-if="val[2] == 3" id="orderCompleted_icon_greyBird" class="iconify" data-icon="emojione-v1:bird" data-width="45" data-height="45"></span>
                        </li>
                        <li>
                            <h5>已送達</h5>
                            <span v-if="val[2] == 4" id="orderCompleted_icon_greyBird" class="iconify" data-icon="emojione-v1:bird" data-width="45" data-height="45"></span>
                        </li>

                    </ul>
                </div>
                <a :href="'./orderDetails.html?orderid='+val[4]"  class="btnXL_b">詳細資訊</a>
            </section>
        </div>
        `,})

    new Vue({
            el:'#personal_order',
            data:{
                content:'',
                pagelist:['目前訂單狀況','購買紀錄'],
                personalpage:'',
            },
            methods: {
                chgpage(e){
                   let n = parseInt(e.target.dataset.n)
                   this.personalpage = `personalpage${n+1}`
                   $('.li_select').removeClass('li_select');
                        e.target.classList.add('li_select')
                }
            },
        });
</script>
</body>
</html>